# Template file for 'netsurf-fbdev' using framebuffer via SDL 640x480 16 bpp
pkgname=netsurf-fbdev
version=3.10
revision=4
build_style=gnu-makefile
wrksrc=netsurf-${version}
make_use_env=yes
make_build_args="TARGET=framebuffer NETSURF_USE_BMP=YES NETSURF_USE_WEBP=YES NETSURF_USE_FREETYPE2=YES NETSURF_FB_FONTPATH=/usr/share/fonts/TTF
 NETSURF_USE_VIDEO=NO NETSURF_USE_HARU_PDF=NO NETSURF_USE_DUKTAPE=YES NETSURF_FB_FONTLIB=freetype NETSURF_FB_FRONTEND=sdl"
make_install_args="$make_build_args"
hostmakedepends="pkg-config gperf flex nsgenbind gdk-pixbuf-devel
 tar perl-HTML-Parser glib-devel xxd"
makedepends="
 libidn-devel libmng-devel libxml2-devel libcurl-devel lcms-devel libwebp-devel libsvgtiny-devel librosprite-devel libnspsl-devel libnslog-devel
 libcss-devel libnsbmp-devel libnsgif-devel libutf8proc-devel freetype-devel libnsutils-devel libdom-devel libnsfb-devel SDL-devel"
depends="SDL dejavu-fonts-ttf ca-certificates"
#conflicts="netsurf visurf-git"
short_desc="Free, open source web browser written in C"
maintainer="Greguu <greguu@null.net>"
license="GPL-2.0-only, MIT"
homepage="http://www.netsurf-browser.org"
distfiles="http://download.netsurf-browser.org/netsurf/releases/source/netsurf-${version}-src.tar.gz"
checksum=36484429e193614685c2ff246f55bd0a6dddf31a018bee45e0d1f7c28851995e

post_install() {
        # Install license
        vlicense COPYING

        # Install wrapper for landscape screen orientation
        vbin ${FILESDIR}/netsurf.sh netsurf

        # Install wrapper for portrait screen orientation
        vbin ${FILESDIR}/netsurf-p.sh netsurf-p
}
