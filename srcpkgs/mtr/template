# Template file for 'mtr'
pkgname=mtr
version=0.95
revision=3
build_style="gnu-configure"
hostmakedepends="automake pkg-config"
makedepends="ncurses-devel libcap-devel"
depends="libcap-progs"
short_desc="Combines the functionality of traceroute and ping into one tool"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-only"
homepage="http://www.bitwizard.nl/mtr/"
distfiles="https://github.com/traviscross/mtr/archive/v${version}.tar.gz"
checksum=12490fb660ba5fb34df8c06a0f62b4f9cbd11a584fc3f6eceda0a99124e8596f

pre_configure() {
	echo $version >.tarball-version
	./bootstrap.sh
}

do_configure() {
	mkdir $wrksrc/build_nox
	cd $wrksrc/build_nox
	$wrksrc/configure ${configure_args} --without-gtk
}

do_build() {
	for p in $wrksrc/build_nox; do
		cd $p
		make ${makejobs}
	done
}

do_install() {
	cd $wrksrc/build_nox
	make DESTDIR=$DESTDIR install
	chmod 0755 $DESTDIR/usr/bin/*
}
